SET @OGUID := 100014; -- SFDB oguid;
SET @CGUID := 120681; -- SFDB cguid;

DELETE FROM `phase_area` WHERE AreaId=5834 AND PhaseId=598;
INSERT INTO `phase_area` (`AreaId`, `PhaseId`, `Comment`) VALUES
(5834, 598, 'ShangXiTG - Cosmetic - Monk Weapon Racks');

DELETE FROM `conditions` WHERE SourceTypeOrReferenceId=26 AND SourceGroup=598 AND ConditionValue1=30027;
INSERT INTO `conditions` (`SourceTypeOrReferenceId`, `SourceGroup`, `SourceEntry`, `SourceId`, `ElseGroup`, `ConditionTypeOrReference`, `ConditionTarget`, `ConditionValue1`, `ConditionValue2`, `ConditionValue3`, `NegativeCondition`, `ErrorType`, `ErrorTextId`, `ScriptName`, `Comment`) VALUES
(26, 598, 5834, 0, 1, 8, 0, 30027, 0, 0, 1, 0, 0, '', 'Set Phase 598 in area 5834 if q30027 not rewarded'),
-- LOGICAL AND
(26, 598, 5834, 0, 1, 15, 0, 512, 0, 0, 0, 0, 0, '', 'Set Phase 598 in area 5834 if player is monk');

UPDATE creature_template SET AIName='SmartAI' WHERE entry=53566;
DELETE FROM smart_scripts WHERE entryorguid=53566;
INSERT INTO smart_scripts (entryorguid, source_type, id, link, event_type, event_phase_mask, event_chance, event_flags, event_param1, event_param2, event_param3, event_param4, action_type, action_param1, action_param2, action_param3, action_param4, action_param5, action_param6, target_type, target_param1, target_param2, target_param3, target_x, target_y, target_z, target_o, comment) VALUES
(53566, 0, 0, 0, 20, 0, 100, 0, 29406, 0, 0, 0, 44, 598, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 'Master Shang Xi: On quest reward 29406 - unset player phase'),
(53566, 0, 1, 0, 20, 0, 100, 0, 29406, 0, 0, 0, 44, 169, 1, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 'Master Shang Xi: On quest reward 29406 - set player phase');

DELETE FROM `gameobject` WHERE id=209970;
DELETE FROM `gameobject` WHERE map=860 AND phaseId=598;
DELETE FROM `gameobject` WHERE guid BETWEEN @OGUID-14 AND @OGUID-0;
INSERT INTO `gameobject` (`guid`, `id`, `map`, `spawnMask`, `phaseId`, `phaseGroup`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`) VALUES
(@OGUID-0, 210986, 860, 1, 598, 0, 1421.91, 3377.98, 192.983, 5.97902, 0, 0, 0.151497, -0.988458, 120, 255, 1),
(@OGUID-1, 209972, 860, 1, 598, 0, 1446.98, 3389.89, 173.35, 1.23918, 0, 0, 0.580701, 0.814117, 120, 255, 1),
(@OGUID-2, 211336, 860, 1, 598, 0, 1461.49, 3464.92, 181.63, 1.74269, 0, 0, 0.765196, 0.643798, 120, 255, 1),
(@OGUID-3, 211337, 860, 1, 598, 0, 1461.14, 3464.87, 181.621, 3.81097, 0, 0, 0.944513, -0.328475, 120, 255, 1),
(@OGUID-4, 210005, 860, 1, 598, 0, 1478.45, 3398.19, 171.242, 2.04204, 0, 0, 0.852641, 0.522496, 120, 255, 1),
(@OGUID-5, 210005, 860, 1, 598, 0, 1495, 3412.24, 171.231, 2.79252, 0, 0, 0.984807, 0.173652, 120, 255, 1),
(@OGUID-6, 210005, 860, 1, 598, 0, 1435.92, 3460.55, 171.177, 3.56047, 0, 0, 0.978148, -0.207911, 120, 255, 1),
(@OGUID-7, 210005, 860, 1, 598, 0, 1472.45, 3441.16, 171.183, 4.7822, 0, 0, 0.681999, -0.731353, 120, 255, 1),
(@OGUID-8, 210005, 860, 1, 598, 0, 1430.43, 3429.18, 171.14, 0.401425, 0, 0, 0.199368, 0.979925, 120, 255, 1),
(@OGUID-9, 210005, 860, 1, 598, 0, 1428.59, 3433.96, 171.162, 0.523598, 0, 0, 0.258819, 0.965926, 120, 255, 1),
(@OGUID-10, 210005, 860, 1, 598, 0, 1487.86, 3407.09, 171.193, 2.07694, 0, 0, 0.861629, 0.507539, 120, 255, 1),
(@OGUID-11, 210005, 860, 1, 598, 0, 1487.7, 3450.5, 171.175, 4.20625, 0, 0, 0.861627, -0.507541, 120, 255, 1),
(@OGUID-12, 210005, 860, 1, 598, 0, 1443.33, 3450.59, 171.162, 4.11898, 0, 0, 0.882947, -0.469473, 120, 255, 1),
(@OGUID-13, 210005, 860, 1, 598, 0, 1420.94, 3457.37, 171.185, 0.279252, 0, 0, 0.139173, 0.990268, 120, 255, 1),
(@OGUID-14, 209971, 860, 1, 598, 0, 1435.17, 3353.44, 173.35, 4.39823, 0, 0, 0.809017, -0.587785, 120, 255, 0);


DELETE FROM `creature` WHERE guid BETWEEN @CGUID-84 AND @CGUID-0;
DELETE FROM `creature` WHERE map=860 AND phaseId=598; 
INSERT INTO `creature` (`guid`, `id`, `map`, `spawnMask`, `phaseId`, `phaseGroup`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `spawndist`, `currentwaypoint`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`) VALUES
(@CGUID-0, 57753, 860, 1, 598, 0, 0, 0, 1475.99, 3406.96, 171.245, 0.575959, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-1, 53565, 860, 1, 598, 0, 0, 0, 1482.18, 3400.93, 171.326, 1.95477, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-2, 53565, 860, 1, 598, 0, 0, 0, 1484.05, 3402.43, 171.3, 2.82743, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-3, 57752, 860, 1, 598, 0, 0, 0, 1478.94, 3408.6, 171.245, 3.63029, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-4, 53565, 860, 1, 598, 0, 0, 0, 1492.23, 3426.46, 171.245, 6.16101, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-5, 65469, 860, 1, 598, 0, 0, 0, 1488.9, 3442.31, 171.245, 0.698132, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-6, 65469, 860, 1, 598, 0, 0, 0, 1470.85, 3422.73, 171.245, 2.56563, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-7, 57754, 860, 1, 598, 0, 0, 0, 1467.07, 3433.85, 171.238, 5.03977, 120, 5, 0, 0, 0, 1, 0, 0, 0),
(@CGUID-8, 53565, 860, 1, 598, 0, 0, 0, 1440.65, 3417.01, 171.217, 3.45575, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-9, 53566, 860, 1, 598, 0, 0, 0, 1462, 3465.59, 181.581, 2.85204, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-10, 57748, 860, 1, 598, 0, 0, 0, 1434.05, 3448.64, 171.245, 3.45575, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-11, 53565, 860, 1, 598, 0, 0, 0, 1455.32, 3441.31, 171.245, 1.53589, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-12, 65469, 860, 1, 598, 0, 0, 0, 1426.7, 3439.51, 171.156, 0.296706, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-13, 53565, 860, 1, 598, 0, 0, 0, 1422.66, 3451.95, 171.222, 0.244346, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-14, 53565, 860, 1, 598, 0, 0, 0, 1429.38, 3442.13, 171.245, 0.261799, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-15, 53565, 860, 1, 598, 0, 0, 0, 1424.13, 3447.63, 171.156, 0.279253, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-16, 53565, 860, 1, 598, 0, 0, 0, 1427.92, 3446.74, 171.241, 0.122173, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-17, 53565, 860, 1, 598, 0, 0, 0, 1426.59, 3450.92, 171.245, 0.261799, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-18, 53565, 860, 1, 598, 0, 0, 0, 1425.46, 3443.5, 171.17, 0.20944, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-19, 53714, 860, 1, 598, 0, 0, 0, 1492.83, 3416.03, 171.051, 2.68781, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-20, 53714, 860, 1, 598, 0, 0, 0, 1493.66, 3438.7, 171.106, 3.42085, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-21, 53714, 860, 1, 598, 0, 0, 0, 1433.03, 3423.23, 170.991, 0.610865, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-22, 53714, 860, 1, 598, 0, 0, 0, 1448.89, 3447.72, 171.188, 4.11898, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-23, 53714, 860, 1, 598, 0, 0, 0, 1439.49, 3455.07, 171.113, 3.92699, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-24, 57873, 860, 1, 598, 0, 0, 0, 1455.57, 3444.19, 171.052, 4.20624, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-25, 53714, 860, 1, 598, 0, 0, 0, 1446.66, 3449.3, 171.143, 4.15388, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-26, 53714, 860, 1, 598, 0, 0, 0, 1438.95, 3412.89, 170.991, 0.506145, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-27, 57873, 860, 1, 598, 0, 0, 0, 1437.84, 3415.38, 170.921, 0.471239, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-28, 53714, 860, 1, 598, 0, 0, 0, 1434.5, 3420.98, 170.931, 0.610865, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-29, 53714, 860, 1, 598, 0, 0, 0, 1453.05, 3445.25, 171.12, 4.20624, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-30, 53714, 860, 1, 598, 0, 0, 0, 1441.35, 3453.07, 171.141, 3.90954, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-31, 53714, 860, 1, 598, 0, 0, 0, 1483.52, 3448.32, 171.07, 4.85202, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-32, 53714, 860, 1, 598, 0, 0, 0, 1458.93, 3417.62, 171.208, 4.74729, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-33, 53714, 860, 1, 598, 0, 0, 0, 1461.63, 3417.96, 171.225, 4.86947, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-34, 53714, 860, 1, 598, 0, 0, 0, 1480.81, 3448.06, 171.046, 4.79965, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-35, 53714, 860, 1, 598, 0, 0, 0, 1474.73, 3442.83, 171.045, 5.11381, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-36, 53714, 860, 1, 598, 0, 0, 0, 1469.04, 3442.39, 171.07, 4.71239, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-37, 57873, 860, 1, 598, 0, 0, 0, 1495.62, 3426.02, 171.051, 2.84489, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-38, 57873, 860, 1, 598, 0, 0, 0, 1490.86, 3444.75, 171.216, 3.92699, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-39, 53714, 860, 1, 598, 0, 0, 0, 1494.46, 3436.09, 171.106, 3.4383, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-40, 53714, 860, 1, 598, 0, 0, 0, 1466.32, 3442.13, 171.094, 4.74729, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-41, 53714, 860, 1, 598, 0, 0, 0, 1496.19, 3428.69, 171.051, 2.96706, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-42, 53714, 860, 1, 598, 0, 0, 0, 1465.81, 3422.04, 171.255, 5.58505, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-43, 53714, 860, 1, 598, 0, 0, 0, 1477.18, 3444.04, 171.053, 5.13127, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-44, 53714, 860, 1, 598, 0, 0, 0, 1488.99, 3446.74, 171.122, 3.94444, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-45, 53714, 860, 1, 598, 0, 0, 0, 1493.68, 3418.64, 171.051, 2.77507, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-46, 53714, 860, 1, 598, 0, 0, 0, 1468.5, 3399.89, 171.056, 1.50098, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-47, 53714, 860, 1, 598, 0, 0, 0, 1492.83, 3416.03, 171.051, 2.68781, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-48, 53714, 860, 1, 598, 0, 0, 0, 1471.21, 3399.65, 171.064, 1.51844, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-49, 57873, 860, 1, 598, 0, 0, 0, 1467.26, 3424.37, 171.087, 5.68977, 30, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-50, 53566, 860, 1, 598, 0, 0, 0, 1445.49, 3385.15, 173.886, 4.39344, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-51, 65470, 860, 1, 598, 0, 0, 0, 1425.91, 3361.5, 184.521, 5.67232, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-52, 65470, 860, 1, 598, 0, 0, 0, 1431.72, 3373.32, 184.527, 1.23918, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-53, 54586, 860, 1, 598, 0, 0, 0, 1425.86, 3369.1, 173.886, 4.88692, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-54, 54586, 860, 1, 598, 0, 0, 0, 1418.97, 3384.1, 173.005, 2.99682, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-55, 54587, 860, 1, 598, 0, 0, 0, 1433.77, 3373.08, 173.654, 6.13702, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-56, 54586, 860, 1, 598, 0, 0, 0, 1415.69, 3384.54, 173.015, 6.12097, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-57, 54586, 860, 1, 598, 0, 0, 0, 1430.55, 3379.32, 173.886, 1.42473, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-58, 65470, 860, 1, 598, 0, 0, 0, 1426.45, 3365.83, 173.886, 1.72788, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-59, 54586, 860, 1, 598, 0, 0, 0, 1415.48, 3375.62, 173.008, 2.04204, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-60, 65470, 860, 1, 598, 0, 0, 0, 1413.88, 3378.53, 173.016, 5.20108, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-61, 65470, 860, 1, 598, 0, 0, 0, 1432.81, 3376.42, 184.527, 4.39823, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-62, 65470, 860, 1, 598, 0, 0, 0, 1431.02, 3382.6, 173.885, 4.54886, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-63, 65471, 860, 1, 598, 0, 0, 0, 1434.03, 3369.41, 173.654, 0.486768, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-64, 65471, 860, 1, 598, 0, 0, 0, 1442.38, 3364.71, 173.651, 1.67661, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-65, 65470, 860, 1, 598, 0, 0, 0, 1439.58, 3364.46, 184.527, 1.62316, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-66, 54586, 860, 1, 598, 0, 0, 0, 1445.2, 3381.24, 192.799, 2.78863, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-67, 54587, 860, 1, 598, 0, 0, 0, 1447.37, 3368.46, 173.653, 2.5731, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-68, 65471, 860, 1, 598, 0, 0, 0, 1435.96, 3366.72, 173.653, 0.849348, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-69, 65470, 860, 1, 598, 0, 0, 0, 1443.8, 3355.36, 184.522, 5.93412, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-70, 65470, 860, 1, 598, 0, 0, 0, 1436.63, 3386.38, 173.886, 5.55015, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-71, 65470, 860, 1, 598, 0, 0, 0, 1436.3, 3389.04, 184.52, 5.96903, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-72, 54586, 860, 1, 598, 0, 0, 0, 1442.17, 3382.51, 192.799, 5.94768, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-73, 65470, 860, 1, 598, 0, 0, 0, 1439.08, 3367.77, 184.527, 4.93928, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-74, 54586, 860, 1, 598, 0, 0, 0, 1439.11, 3384.18, 173.886, 2.3911, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-75, 65470, 860, 1, 598, 0, 0, 0, 1439.4, 3387.95, 184.521, 2.80998, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-76, 54586, 860, 1, 598, 0, 0, 0, 1450.87, 3363.6, 173.886, 1.03354, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-77, 61411, 860, 1, 598, 0, 0, 0, 1441.26, 3372.11, 173.379, 4.36139, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-78, 65470, 860, 1, 598, 0, 0, 0, 1446.91, 3354.23, 184.52, 2.77507, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-79, 65471, 860, 1, 598, 0, 0, 0, 1445.32, 3365.97, 173.651, 2.04959, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-80, 54586, 860, 1, 598, 0, 0, 0, 1457.95, 3378.23, 184.523, 1.90241, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-81, 65470, 860, 1, 598, 0, 0, 0, 1452.49, 3366.49, 173.886, 4.19258, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-82, 54586, 860, 1, 598, 0, 0, 0, 1456.93, 3381.36, 184.515, 5.06145, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-83, 65471, 860, 1, 598, 0, 0, 0, 1439.01, 3365.12, 173.652, 1.26783, 120, 0, 0, 0, 0, 0, 0, 0, 0),
(@CGUID-84, 65470, 860, 1, 598, 0, 0, 0, 1428.56, 3359.54, 184.522, 2.51327, 120, 0, 0, 0, 0, 0, 0, 0, 0);
